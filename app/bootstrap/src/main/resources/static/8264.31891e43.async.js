(self.webpackChunk=self.webpackChunk||[]).push([[8264],{5966:function(I,F,n){"use strict";var x=n(97685),h=n(1413),c=n(91),Z=n(21770),m=n(23323),r=n(55241),b=n(98423),K=n(62435),O=n(58055),P=n(86074),g=["fieldProps","proFieldProps"],C=["fieldProps","proFieldProps"],D="text",te=function(_){var t=_.fieldProps,T=_.proFieldProps,i=(0,c.Z)(_,g);return(0,P.jsx)(O.Z,(0,h.Z)({valueType:D,fieldProps:t,filedConfig:{valueType:D},proFieldProps:T},i))},re=function(_){var t=(0,Z.Z)(_.open||!1,{value:_.open,onChange:_.onOpenChange}),T=(0,x.Z)(t,2),i=T[0],J=T[1];return(0,P.jsx)(m.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(V){var M,$=V.getFieldValue(_.name||[]);return(0,P.jsx)(r.Z,(0,h.Z)((0,h.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return J(e)},content:(0,P.jsxs)("div",{style:{padding:"4px 0"},children:[(M=_.statusRender)===null||M===void 0?void 0:M.call(_,$),_.strengthText?(0,P.jsx)("div",{style:{marginTop:10},children:(0,P.jsx)("span",{children:_.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},_.popoverProps),{},{open:i,children:_.children}))}})},ae=function(_){var t=_.fieldProps,T=_.proFieldProps,i=(0,c.Z)(_,C),J=(0,K.useState)(!1),H=(0,x.Z)(J,2),V=H[0],M=H[1];return t!=null&&t.statusRender&&i.name?(0,P.jsx)(re,{name:i.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:V,onOpenChange:M,children:(0,P.jsx)("div",{children:(0,P.jsx)(O.Z,(0,h.Z)({valueType:"password",fieldProps:(0,h.Z)((0,h.Z)({},(0,b.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var e;t==null||(e=t.onBlur)===null||e===void 0||e.call(t,B),M(!1)},onClick:function(B){var e;t==null||(e=t.onClick)===null||e===void 0||e.call(t,B),M(!0)}}),proFieldProps:T,filedConfig:{valueType:D}},i))})}):(0,P.jsx)(O.Z,(0,h.Z)({valueType:"password",fieldProps:t,proFieldProps:T,filedConfig:{valueType:D}},i))},N=te;N.Password=ae,N.displayName="ProFormComponent",F.Z=N},90672:function(I,F,n){"use strict";var x=n(1413),h=n(91),c=n(62435),Z=n(58055),m=n(86074),r=["fieldProps","proFieldProps"],b=function(O,P){var g=O.fieldProps,C=O.proFieldProps,D=(0,h.Z)(O,r);return(0,m.jsx)(Z.Z,(0,x.Z)({ref:P,valueType:"textarea",fieldProps:g,proFieldProps:C},D))};F.Z=c.forwardRef(b)},50727:function(I,F,n){"use strict";var x=n(4942),h=n(97685),c=n(91),Z=n(55850),m=n(15861),r=n(1413),b=n(24969),K=n(97462),O=n(952),P=n(10915),g=n(48171),C=n(53914),D=n(22270),te=n(60249),re=n(83622),ae=n(23323),N=n(21770),S=n(88306),_=n(8880),t=n(62435),T=n(90498),i=n(86074),J=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],H=["record","position","creatorButtonText","newRecordType","parentKey","style"],V=t.createContext(void 0);function M(e){var R=e.children,w=e.record,G=e.position,Y=e.newRecordType,A=e.parentKey,z=(0,t.useContext)(V);return t.cloneElement(R,(0,r.Z)((0,r.Z)({},R.props),{},{onClick:function(){var Q=(0,m.Z)((0,Z.Z)().mark(function le(oe){var ee,ne,W,L;return(0,Z.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(ee=(ne=R.props).onClick)===null||ee===void 0?void 0:ee.call(ne,oe);case 2:if(L=f.sent,L!==!1){f.next=5;break}return f.abrupt("return");case 5:z==null||(W=z.current)===null||W===void 0||W.addEditRecord(w,{position:G,newRecordType:Y,parentKey:A});case 6:case"end":return f.stop()}},le)}));function p(le){return Q.apply(this,arguments)}return p}()}))}function $(e){var R,w,G=(0,P.YB)(),Y=e.onTableChange,A=e.maxLength,z=e.formItemProps,Q=e.recordCreatorProps,p=e.rowKey,le=e.controlled,oe=e.defaultValue,ee=e.onChange,ne=e.editableFormRef,W=(0,c.Z)(e,J),L=(0,t.useRef)(void 0),X=(0,t.useRef)(),f=(0,t.useRef)();(0,t.useImperativeHandle)(W.actionRef,function(){return X.current},[X.current]);var ve=(0,N.Z)(function(){return e.value||oe||[]},{value:e.value,onChange:e.onChange}),se=(0,h.Z)(ve,2),d=se[0],ce=se[1],U=t.useMemo(function(){return typeof p=="function"?p:function(a,v){return a[p]||v}},[p]),ie=(0,g.J)(function(a){if(typeof a=="number"&&!e.name){if(a>=d.length)return a;var v=d&&d[a];return U==null?void 0:U(v,a)}if((typeof a=="string"||a>=d.length)&&e.name){var l=d.findIndex(function(o,u){var s;return(U==null||(s=U(o,u))===null||s===void 0?void 0:s.toString())===(a==null?void 0:a.toString())});if(l!==-1)return l}return a});(0,t.useImperativeHandle)(ne,function(){var a=function(o){var u,s;if(o==null)throw new Error("rowIndex is required");var E=ie(o),y=[e.name,(u=E==null?void 0:E.toString())!==null&&u!==void 0?u:""].flat(1).filter(Boolean);return(s=f.current)===null||s===void 0?void 0:s.getFieldValue(y)},v=function(){var o,u=[e.name].flat(1).filter(Boolean);if(Array.isArray(u)&&u.length===0){var s,E=(s=f.current)===null||s===void 0?void 0:s.getFieldsValue();return Array.isArray(E)?E:Object.keys(E).map(function(y){return E[y]})}return(o=f.current)===null||o===void 0?void 0:o.getFieldValue(u)};return(0,r.Z)((0,r.Z)({},f.current),{},{getRowData:a,getRowsData:v,setRowData:function(o,u){var s,E;if(o==null)throw new Error("rowIndex is required");var y=ie(o),q=[e.name,(s=y==null?void 0:y.toString())!==null&&s!==void 0?s:""].flat(1).filter(Boolean),Me=Object.assign({},(0,r.Z)((0,r.Z)({},a(o)),u||{})),De=(0,_.Z)({},q,Me);return(E=f.current)===null||E===void 0||E.setFieldsValue(De),!0}})},[ie,e.name,f.current]),(0,t.useEffect)(function(){e.controlled&&(d||[]).forEach(function(a,v){var l;(l=f.current)===null||l===void 0||l.setFieldsValue((0,x.Z)({},"".concat(U(a,v)),a))},{})},[(0,C.ZP)(d),e.controlled]),(0,t.useEffect)(function(){if(e.name){var a;f.current=e==null||(a=e.editable)===null||a===void 0?void 0:a.form}},[(R=e.editable)===null||R===void 0?void 0:R.form,e.name]);var j=Q||{},fe=j.record,ue=j.position,Pe=j.creatorButtonText,me=j.newRecordType,Ee=j.parentKey,he=j.style,ge=(0,c.Z)(j,H),_e=ue==="top",k=(0,t.useMemo)(function(){return typeof A=="number"&&A<=(d==null?void 0:d.length)?!1:Q!==!1&&(0,i.jsx)(M,{record:(0,D.h)(fe,d==null?void 0:d.length,d)||{},position:ue,parentKey:(0,D.h)(Ee,d==null?void 0:d.length,d),newRecordType:me,children:(0,i.jsx)(re.ZP,(0,r.Z)((0,r.Z)({type:"dashed",style:(0,r.Z)({display:"block",margin:"10px 0",width:"100%"},he),icon:(0,i.jsx)(b.Z,{})},ge),{},{children:Pe||G.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[Q,A,d==null?void 0:d.length]),Oe=(0,t.useMemo)(function(){return k?_e?{components:{header:{wrapper:function(v){var l,o=v.className,u=v.children;return(0,i.jsxs)("thead",{className:o,children:[u,(0,i.jsxs)("tr",{style:{position:"relative"},children:[(0,i.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:k}),(0,i.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(l=W.columns)===null||l===void 0?void 0:l.length,children:k})]})]})}}}}:{tableViewRender:function(v,l){var o,u;return(0,i.jsxs)(i.Fragment,{children:[(o=(u=e.tableViewRender)===null||u===void 0?void 0:u.call(e,v,l))!==null&&o!==void 0?o:l,k]})}}:{}},[_e,k]),de=(0,r.Z)({},e.editable),Ce=(0,g.J)(function(a,v){var l,o,u;if((l=e.editable)===null||l===void 0||(o=l.onValuesChange)===null||o===void 0||o.call(l,a,v),(u=e.onValuesChange)===null||u===void 0||u.call(e,v,a),e.controlled){var s;e==null||(s=e.onChange)===null||s===void 0||s.call(e,v)}});return(e!=null&&e.onValuesChange||(w=e.editable)!==null&&w!==void 0&&w.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(de.onValuesChange=Ce),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.Provider,{value:X,children:(0,i.jsx)(T.Z,(0,r.Z)((0,r.Z)((0,r.Z)({search:!1,options:!1,pagination:!1,rowKey:p,revalidateOnFocus:!1},W),Oe),{},{tableLayout:"fixed",actionRef:X,onChange:Y,editable:(0,r.Z)((0,r.Z)({},de),{},{formProps:(0,r.Z)({formRef:f},de.formProps)}),dataSource:d,onDataSourceChange:function(v){if(ce(v),e.name&&ue==="top"){var l,o=(0,_.Z)({},[e.name].flat(1).filter(Boolean),v);(l=f.current)===null||l===void 0||l.setFieldsValue(o)}}}))}),e.name?(0,i.jsx)(K.Z,{name:[e.name],children:function(v){var l,o;if(!L.current)return L.current=d,null;var u=(0,S.Z)(v,[e.name].flat(1)),s=u==null?void 0:u.find(function(E,y){var q;return!(0,te.A)(E,(q=L.current)===null||q===void 0?void 0:q[y])});return L.current=d,s&&(e==null||(l=e.editable)===null||l===void 0||(o=l.onValuesChange)===null||o===void 0||o.call(l,s,u)),null}}):null]})}function B(e){var R=O.ZP.useFormInstance();return e.name?(0,i.jsx)(ae.Z.Item,(0,r.Z)((0,r.Z)({style:{maxWidth:"100%"},shouldUpdate:function(G,Y){var A=[e.name].flat(1);try{return JSON.stringify((0,S.Z)(G,A))!==JSON.stringify((0,S.Z)(Y,A))}catch(z){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,i.jsx)($,(0,r.Z)((0,r.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,r.Z)((0,r.Z)({},e.editable),{},{form:R})}))})):(0,i.jsx)($,(0,r.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}B.RecordCreator=M,F.Z=B},64599:function(I,F,n){var x=n(96263);function h(c,Z){var m=typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(!m){if(Array.isArray(c)||(m=x(c))||Z&&c&&typeof c.length=="number"){m&&(c=m);var r=0,b=function(){};return{s:b,n:function(){return r>=c.length?{done:!0}:{done:!1,value:c[r++]}},e:function(C){throw C},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K=!0,O=!1,P;return{s:function(){m=m.call(c)},n:function(){var C=m.next();return K=C.done,C},e:function(C){O=!0,P=C},f:function(){try{!K&&m.return!=null&&m.return()}finally{if(O)throw P}}}}I.exports=h,I.exports.__esModule=!0,I.exports.default=I.exports}}]);
