(self.webpackChunk=self.webpackChunk||[]).push([[4559],{52078:function(W,S,e){"use strict";var v=e(97857),f=e.n(v),d=e(27997),o=e(62435),P=e(86074),l=function(E){d.Mj.register({id:"json"});var T=E.value,h=T===void 0?"{}":T,L=E.onChange,A=E.editorStyle,U=A===void 0?{}:A,_=E.editorKey,O=_===void 0?"json-editor":_,M=E.readOnly,b=M===void 0?!1:M,C=(0,o.useRef)(),r=(0,o.useRef)(),R=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"{}";try{return JSON.parse(x),x}catch(D){return console.warn("Invalid JSON string:",D),"{}"}};return(0,o.useEffect)(function(){if(C.current)return r.current?r.current.setValue(h):(r.current=d.j6.create(C.current,{value:R(h),language:"json",theme:"vs",readOnly:b,folding:!0,automaticLayout:!0}),r.current.onDidChangeModelContent(function(){var c=r.current.getValue();console.log("[JSONEditor] \u7F16\u8F91\u5668\u5185\u5BB9\u53D8\u66F4:",{newValue:c}),L==null||L(c)})),function(){if(r!=null&&r.current){var c;r==null||(c=r.current)===null||c===void 0||c.dispose(),r.current=null}}},[]),(0,o.useEffect)(function(){r.current&&h!==r.current.getValue()&&r.current.setValue(R(h))},[h]),(0,P.jsx)("div",{ref:C,style:f()({height:360,borderRadius:4,overflow:"hidden"},U)},O)};S.Z=l},29297:function(W,S,e){"use strict";e.d(S,{q9:function(){return v.Z},Wy:function(){return E},mi:function(){return A}});var v=e(52078),f=e(97857),d=e.n(f),o=e(55171),P=e.n(o),l=e(86074),V=function(_){var O=_.value,M=_.viewerStyle,b=M===void 0?{}:M,C=_.displayDataTypes,r=C===void 0?!1:C,R=_.name,c=R===void 0?"output json":R;return(0,l.jsx)(P(),{src:O,name:c,collapsed:!1,displayDataTypes:r,style:d()({height:360,padding:12,overflow:"scroll",borderRadius:4,background:"#FFF"},b)})},E=V,T=e(27997),h=e(62435),L=function(_){T.Mj.register({id:"rego"});var O=_.value,M=_.onChange,b=_.editorStyle,C=b===void 0?{}:b,r=_.editorKey,R=_.readOnly,c=R===void 0?!1:R,x=(0,h.useRef)(),D=(0,h.useRef)();return(0,h.useEffect)(function(){if(x.current)return D.current||(D.current=T.j6.create(x.current,{value:O,language:"rego",theme:"vs",readOnly:c,automaticLayout:!0}),D.current.onDidChangeModelContent(function(){M==null||M(D.current.getValue())})),function(){if(D.current){var k;(k=D.current)===null||k===void 0||k.dispose(),D.current=null}}},[]),(0,l.jsx)("div",{ref:x,style:d()({width:"100%",height:760,borderRadius:4,overflow:"hidden"},C)},r)},A=L},80113:function(W,S,e){"use strict";e.r(S);var v=e(13769),f=e.n(v),d=e(97857),o=e.n(d),P=e(15009),l=e.n(P),V=e(99289),E=e.n(V),T=e(5574),h=e.n(T),L=e(53846),A=e(24163),U=e(77603),_=e(68431),O=e(96655),M=e(29448),b=e(39380),C=e(90498),r=e(45830),R=e(68872),c=e(83622),x=e(96074),D=e(83062),k=e(72269),z=e(86738),Y=e(27484),$=e.n(Y),N=e(62435),i=e(86074),G=["pageSize","current"],Q=function(){var B=(0,N.useRef)(),s=(0,r.useIntl)(),X=R.ZP.useMessage(),H=h()(X,2),K=H[0],q=H[1],ee=(0,N.useState)(!1),F=h()(ee,2),te=F[0],w=F[1],Z=(0,N.useRef)({}),le=function(){var g=E()(l()().mark(function a(t){var m,p,u;return l()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return m={id:t.id},j.next=3,(0,O.queryWhiteRuleGrabLock)(m);case 3:p=j.sent,p.code===200&&(K.success(s.formatMessage({id:"common.message.text.edit.success"})),(u=B.current)===null||u===void 0||u.reloadAndRest());case 5:case"end":return j.stop()}},a)}));return function(t){return g.apply(this,arguments)}}(),ne=function(a){w(!0),Z.current=a},se=function(a){w(!0);var t=a.isLockHolder===!0;Z.current=o()(o()({},a),{},{isEditMode:t})},re=function(){var g=E()(l()().mark(function a(t){var m,p,u,y;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isLockHolder){n.next=3;break}return K.warning(s.formatMessage({id:"rule.message.not.holding.lock"})),n.abrupt("return");case 3:return m={id:t==null?void 0:t.id,enable:(t==null?void 0:t.enable)===1?0:1},n.next=6,(0,O.queryChangeWhiteListRuleStatus)(m);case 6:p=n.sent,p.code===200&&(K.success(s.formatMessage({id:"common.message.text.edit.success"})),(u=B.current)===null||u===void 0||(y=u.reloadAndRest)===null||y===void 0||y.call(u));case 8:case"end":return n.stop()}},a)}));return function(t){return g.apply(this,arguments)}}(),ie=function(){var g=E()(l()().mark(function a(t){var m,p,u,y;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isLockHolder){n.next=3;break}return K.warning(s.formatMessage({id:"rule.message.not.holding.lock"})),n.abrupt("return");case 3:return m={id:t==null?void 0:t.id},n.next=6,(0,O.queryDeleteWhiteListRuleById)(m);case 6:p=n.sent,p.code===200&&(K.success(s.formatMessage({id:"common.message.text.delete.success"})),(u=B.current)===null||u===void 0||(y=u.reloadAndRest)===null||y===void 0||y.call(u));case 8:case"end":return n.stop()}},a)}));return function(t){return g.apply(this,arguments)}}(),ae=[{title:s.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(a,t){return(0,i.jsxs)("div",{children:[(0,i.jsx)("section",{style:{color:"#999"},children:$()(t==null?void 0:t.gmtCreate).format("YYYY-MM-DD 18:00:00")||"-"}),(0,i.jsx)("section",{style:{color:"#999"},children:$()(t==null?void 0:t.gmtModified).format("YYYY-MM-DD 18:00:00")||"-"})]})}},{title:s.formatMessage({id:"rule.extend.text.whiteList.title"}),dataIndex:"ruleName",valueType:"text",align:"left",copyable:!0},{title:s.formatMessage({id:"rule.extend.text.whiteList.describe"}),dataIndex:"ruleDesc",valueType:"text",align:"left",hideInSearch:!0,render:function(a,t){return(0,i.jsx)(A.Z,{text:(t==null?void 0:t.ruleDesc)||"-",maxWidth:240,rows:1,style:{color:"rgb(51, 51, 51)"},placement:"topLeft"})}},{title:s.formatMessage({id:"rule.table.columns.text.type"}),dataIndex:"ruleType",valueType:"select",valueEnum:(0,M.W_)(_.sN),align:"center"},{title:s.formatMessage({id:"rule.table.columns.text.creator"}),dataIndex:"creatorName",valueType:"text",align:"center",copyable:!0},{title:s.formatMessage({id:"rule.table.columns.text.config"}),dataIndex:"search",valueType:"text",align:"center",hideInTable:!0},{title:s.formatMessage({id:"rule.table.columns.text.lockor"}),dataIndex:"lockHolderName",valueType:"text",align:"center",hideInSearch:!0},{title:s.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",render:function(a,t){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.ZP,{size:"small",type:"link",onClick:function(){return se(t)},children:s.formatMessage({id:"common.button.text.view"})}),(0,i.jsx)(x.Z,{type:"vertical",style:{margin:"0 8px 0 0"}}),(0,i.jsx)(D.Z,{title:t.isLockHolder?"":"please grab the lock first",placement:"top",children:(0,i.jsx)(k.Z,{disabled:!(t!=null&&t.isLockHolder),checkedChildren:s.formatMessage({id:"common.button.text.enable"}),unCheckedChildren:s.formatMessage({id:"common.button.text.disable"}),checked:(t==null?void 0:t.enable)===1,onClick:function(){return re(t)}})}),(0,i.jsx)(x.Z,{type:"vertical",style:{margin:"0 0 0 8px"}}),(0,i.jsx)(x.Z,{type:"vertical"}),(0,i.jsx)(D.Z,{title:t.isLockHolder?"":"please grab the lock first",placement:"top",children:(0,i.jsx)(z.Z,{title:s.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){return ie(t)},okText:s.formatMessage({id:"common.button.text.ok"}),cancelText:s.formatMessage({id:"common.button.text.cancel"}),children:(0,i.jsx)(c.ZP,{type:"link",danger:!0,size:"small",disabled:!(t!=null&&t.isLockHolder),children:s.formatMessage({id:"common.button.text.delete"})})})})]})}}];return(0,i.jsxs)(b._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[q,(0,i.jsx)(C.Z,{headerTitle:(0,i.jsx)("div",{className:L.Z.customTitle,children:s.formatMessage({id:"rule.module.text.whiteList.inquiry"})}),scroll:{x:"max-content"},actionRef:B,search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},rowKey:"id",request:function(){var g=E()(l()().mark(function a(t){var m,p,u,y,j,n,J;return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return m=t.pageSize,p=t.current,u=f()(t,G),y=o()(o()({},u),{},{page:p,size:m}),I.next=4,(0,O.queryWhiteRuleList)(y);case 4:return j=I.sent,n=j.content,J=j.code,I.abrupt("return",{data:(n==null?void 0:n.data)||[],total:(n==null?void 0:n.total)||0,success:J===200||!1});case 8:case"end":return I.stop()}},a)}));return function(a){return g.apply(this,arguments)}}(),toolBarRender:function(){return[(0,i.jsx)(c.ZP,{type:"primary",onClick:function(){return ne({})},children:s.formatMessage({id:"rule.module.text.createWhiteList"})},"create")]},columns:ae,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1}}),(0,i.jsx)(U.Z,{editDrawerVisible:te,setEditDrawerVisible:w,whiteListDrawerInfo:Z.current,tableActionRef:B})]})};S.default=Q},85674:function(W,S,e){var v={"./simpleWorker":18352,"./simpleWorker.js":18352};function f(d){return Promise.resolve().then(function(){if(!e.o(v,d)){var o=new Error("Cannot find module '"+d+"'");throw o.code="MODULE_NOT_FOUND",o}var P=v[d];return e(P)})}f.keys=function(){return Object.keys(v)},f.id=85674,W.exports=f},10131:function(W,S,e){var v={"./editorBaseApi":[20927],"./editorBaseApi.js":[20927],"./editorSimpleWorker":[81465],"./editorSimpleWorker.js":[81465],"./editorWorker":[85215],"./editorWorker.js":[85215],"./editorWorkerHost":[98008],"./editorWorkerHost.js":[98008],"./findSectionHeaders":[72846],"./findSectionHeaders.js":[72846],"./getIconClasses":[22016],"./getIconClasses.js":[22016],"./languageFeatureDebounce":[88191],"./languageFeatureDebounce.js":[88191],"./languageFeatures":[71922],"./languageFeatures.js":[71922],"./languageFeaturesService":[7421],"./languageFeaturesService.js":[7421],"./languageService":[81032],"./languageService.js":[81032],"./languagesAssociations":[73536],"./languagesAssociations.js":[73536],"./languagesRegistry":[4765],"./languagesRegistry.js":[4765],"./markerDecorations":[36357],"./markerDecorations.js":[36357],"./markerDecorationsService":[86036],"./markerDecorationsService.js":[86036],"./model":[73733],"./model.js":[73733],"./modelService":[51200],"./modelService.js":[51200],"./resolverService":[88216],"./resolverService.js":[88216],"./semanticTokensDto":[14704],"./semanticTokensDto.js":[14704],"./semanticTokensProviderStyling":[92294],"./semanticTokensProviderStyling.js":[92294],"./semanticTokensStyling":[73343],"./semanticTokensStyling.js":[73343],"./semanticTokensStylingService":[84146],"./semanticTokensStylingService.js":[84146],"./textModelSync/textModelSync.impl":[28944],"./textModelSync/textModelSync.impl.js":[28944],"./textModelSync/textModelSync.protocol":[23145,3145],"./textModelSync/textModelSync.protocol.js":[23145,3145],"./textResourceConfiguration":[71765],"./textResourceConfiguration.js":[71765],"./treeSitterParserService":[28922],"./treeSitterParserService.js":[28922],"./treeViewsDnd":[80642],"./treeViewsDnd.js":[80642],"./treeViewsDndService":[58345],"./treeViewsDndService.js":[58345],"./unicodeTextModelHighlighter":[31446],"./unicodeTextModelHighlighter.js":[31446]};function f(d){if(!e.o(v,d))return Promise.resolve().then(function(){var l=new Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l});var o=v[d],P=o[0];return Promise.all(o.slice(1).map(e.e)).then(function(){return e(P)})}f.keys=function(){return Object.keys(v)},f.id=10131,W.exports=f}}]);
