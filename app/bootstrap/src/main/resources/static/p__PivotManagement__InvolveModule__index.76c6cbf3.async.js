"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4427],{64317:function(me,_,t){var z=t(1413),v=t(91),q=t(22270),u=t(62435),ae=t(66758),L=t(58055),U=t(86074),x=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],X=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],le=function(o,e){var W=o.fieldProps,se=o.children,N=o.params,te=o.proFieldProps,ne=o.mode,K=o.valueEnum,Y=o.request,ue=o.showSearch,ve=o.options,ce=(0,v.Z)(o,x),H=(0,u.useContext)(ae.Z);return(0,U.jsx)(L.Z,(0,z.Z)((0,z.Z)({valueEnum:(0,q.h)(K),request:Y,params:N,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,z.Z)({options:ve,mode:ne,showSearch:ue,getPopupContainer:H.getPopupContainer},W),ref:e,proFieldProps:te},ce),{},{children:se}))},G=u.forwardRef(function(Z,o){var e=Z.fieldProps,W=Z.children,se=Z.params,N=Z.proFieldProps,te=Z.mode,ne=Z.valueEnum,K=Z.request,Y=Z.options,ue=(0,v.Z)(Z,X),ve=(0,z.Z)({options:Y,mode:te||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},e),ce=(0,u.useContext)(ae.Z);return(0,U.jsx)(L.Z,(0,z.Z)((0,z.Z)({valueEnum:(0,q.h)(ne),request:K,params:se,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,z.Z)({getPopupContainer:ce.getPopupContainer},ve),ref:o,proFieldProps:N},ue),{},{children:W}))}),Q=u.forwardRef(le),B=G,ee=Q;ee.SearchSelect=B,ee.displayName="ProFormComponent",_.Z=ee},69055:function(me,_,t){t.d(_,{Z:function(){return Z}});var z=t(22181),v=t(83622),q=t(87462),u=t(62435),ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},L=ae,U=t(84089),x=function(e,W){return u.createElement(U.Z,(0,q.Z)({},e,{ref:W,icon:L}))},X=u.forwardRef(x),le=X,G=t(45830),Q={noPermissionContainer:"noPermissionContainer___mfh3D","ant-result":"ant-result___HwWPh","ant-result-icon":"ant-result-icon___kCRak",anticon:"anticon___dFq4q","ant-result-title":"ant-result-title___qzgxn","ant-result-subtitle":"ant-result-subtitle___wgaK1","ant-result-extra":"ant-result-extra___YuiiI","ant-btn":"ant-btn___SR44Y",dark:"dark___6IwTX",fadeInUp:"fadeInUp___lq2_S"},B=t(86074),ee=function(e){var W=e.title,se=e.subTitle,N=e.showReturnButton,te=N===void 0?!0:N,ne=e.onReturn,K=(0,G.useIntl)(),Y=function(){ne?ne():G.history===null||G.history===void 0||G.history.push("/")};return(0,B.jsx)("div",{className:Q.noPermissionContainer,children:(0,B.jsx)(z.ZP,{icon:(0,B.jsx)(le,{}),status:"403",title:W||K.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:se||K.formatMessage({id:"common.message.text.no.permission.subtitle"}),extra:te&&(0,B.jsx)(v.ZP,{type:"primary",onClick:Y,children:K.formatMessage({id:"common.button.text.return"})})})})},Z=ee},82043:function(me,_,t){var z=t(62435),v=t(45830),q=t(69055),u=t(86074),ae=function(U){var x=U.children,X=U.accessKey,le=U.fallback,G=(0,v.useAccess)(),Q=(0,v.useIntl)();if(!X)return(0,u.jsx)(u.Fragment,{children:x});var B=G[X];return B?(0,u.jsx)(u.Fragment,{children:x}):(0,u.jsx)(u.Fragment,{children:le||(0,u.jsx)(q.Z,{title:Q.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:Q.formatMessage({id:"common.message.text.no.permission.subtitle"})})})};_.Z=ae},24163:function(me,_,t){var z=t(97857),v=t.n(z),q=t(25593),u=t(83062),ae=t(62435),L=t(86074),U=q.Z.Paragraph;_.Z=function(x){var X=x.text,le=x.width,G=x.maxWidth,Q=x.rows,B=Q===void 0?2:Q,ee=x.placement,Z=ee===void 0?"top":ee,o=x.color,e=o===void 0?"rgba(0, 0, 0, 0.88)":o,W=x.link,se=W===void 0?!1:W,N=x.onClickCallBackFunc,te=x.style,ne=te===void 0?{}:te,K=x.copyable,Y=K===void 0?!1:K;return(0,L.jsx)("div",{style:{maxWidth:G,width:le},children:(0,L.jsx)(u.Z,{title:(0,L.jsx)("div",{children:X}),placement:Z,children:(0,L.jsx)(U,{ellipsis:{rows:B},style:v()({marginBottom:0,color:e,cursor:se?"pointer":""},ne),onClick:N,copyable:Y,children:X})})})}},37491:function(me,_,t){t.r(_),t.d(_,{default:function(){return rt}});var z=t(97857),v=t.n(z),q=t(15009),u=t.n(q),ae=t(99289),L=t.n(ae),U=t(5574),x=t.n(U),X=t(53846),le=t(24163),G=t(82043),Q=t(13769),B=t.n(Q),ee=t(19632),Z=t.n(ee),o=t(45830),e=t(86074),W=[{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.title.timing.notice"}),value:"timing",desc:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.title.timing.notice.desc"})},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.title.realtime.notice"}),value:"realtime",desc:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.title.realtime.notice.desc"})}],se=[{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.dingGroup"}),value:"dingGroup"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.wechat"}),value:"wechat"}],N=[{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.dingGroup"}),value:"dingGroup"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.interfaceCallback"}),value:"interfaceCallback"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.wechat"}),value:"wechat"}],te=[{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.monday"}),value:"1"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.tuesday"}),value:"2"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.wednesday"}),value:"3"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.thursday"}),value:"4"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.friday"}),value:"5"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.saturday"}),value:"6"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.day.sunday"}),value:"7"},{label:(0,e.jsx)(o.FormattedMessage,{id:"involve.extend.text.every.day"}),value:"all"}],ne=[{label:"10: 00",value:"10"},{label:"11: 00",value:"11"},{label:"12: 00",value:"12"},{label:"13: 00",value:"13"},{label:"14: 00",value:"14"},{label:"15: 00",value:"15"},{label:"16: 00",value:"16"},{label:"17: 00",value:"17"},{label:"18: 00",value:"18"},{label:"19: 00",value:"19"},{label:"20: 00",value:"20"},{label:"21: 00",value:"21"}],K=t(37476),Y=t(23323),ue=t(84567),ve=t(71230),ce=t(15746),H=t(96486),w=t(62435),we=function(j){var re=Y.Z.useForm(),R=x()(re,1),D=R[0],g=j.noticeFormVisible,I=j.setNoticeFormVisible,c=j.formRef,O=(0,o.useIntl)(),V=function(){var A=L()(u()().mark(function n(m){var P,l,f,i,T;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(P=c.current.getFieldValue("actionList"),l=m==null?void 0:m.actionList,!(0,H.isEmpty)(l)){p.next=4;break}return p.abrupt("return",I(!1));case 4:f=l==null?void 0:l.map(function(S,k){return{idx:k+1,actionType:S}}),(0,H.isEmpty)(P)?c.current.setFieldValue("actionList",f):(T=(i=[].concat(Z()(P),Z()(f)))===null||i===void 0?void 0:i.map(function(S,k){return v()(v()({},S),{},{idx:k+1})}),c.current.setFieldValue("actionList",T)),I(!1);case 7:case"end":return p.stop()}},n)}));return function(m){return A.apply(this,arguments)}}(),oe=function(){D.resetFields()},J=function(){I(!1),oe()};return(0,e.jsx)(K.Y,{title:O.formatMessage({id:"involve.extend.title.notification.configuration"}),width:540,labelCol:{span:6},wrapperCol:{span:18},form:D,modalProps:{destroyOnClose:!0,onCancel:function(){return J()},styles:{body:{paddingTop:12}}},layout:"horizontal",open:g,onFinish:V,children:(0,e.jsx)(Y.Z.Item,{name:"actionList",children:(0,e.jsx)(ue.Z.Group,{style:{width:"100%"},children:(0,e.jsx)(ve.Z,{children:W.map(function(A){return(0,e.jsxs)(ce.Z,{span:24,children:[(0,e.jsx)(ue.Z,{value:A.value,children:A.label}),(0,e.jsxs)("p",{style:{fontSize:12,marginLeft:20,color:"#C0C0C0"},children:["(",A.desc,")"]})]},A.value)})})})})})},Oe=we,he=t(64317),Fe=t(97462),ye=t(90672),ie=t(83622),Ve=function(j){var re=Y.Z.useForm(),R=x()(re,1),D=R[0],g=(0,o.useIntl)(),I=j.realtimeFormVisible,c=j.setRealtimeFormVisible,O=j.formRef,V=j.notificationInfo,oe=function(){var n=L()(u()().mark(function m(P){var l,f,i;return u()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:l=O.current.getFieldValue("actionList"),f=v()(v()({},V),P),i=l==null?void 0:l.map(function(p){return p.idx===V.idx?f:p}),O.current.setFieldValue("actionList",i),c(!1);case 5:case"end":return F.stop()}},m)}));return function(P){return n.apply(this,arguments)}}(),J=function(){D.resetFields()},A=function(){c(!1)};return(0,w.useEffect)(function(){I&&!(0,H.isEmpty)(V)?D.setFieldsValue(v()({},V)):I||J()},[I]),(0,e.jsxs)(K.Y,{title:g.formatMessage({id:"involve.extend.title.real.time.notification"}),width:560,form:D,modalProps:{destroyOnClose:!0,onCancel:function(){return A()}},layout:"horizontal",open:I,onFinish:oe,children:[(0,e.jsx)(he.Z,{label:g.formatMessage({id:"involve.extend.title.subscription.type"}),name:"action",options:N,rules:[{required:!0}]}),(0,e.jsx)(Fe.Z,{name:["action"],children:function(m){var P,l=m.action;return l===((P=N[1])===null||P===void 0?void 0:P.value)?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ye.Z,{label:g.formatMessage({id:"involve.extend.title.group.chat.name"}),name:"name",rules:[{required:!0}]})}}),(0,e.jsx)(Fe.Z,{name:["action"],children:function(m){var P,l,f=m.action;return(0,e.jsx)(ye.Z,{label:f===((P=N[1])===null||P===void 0?void 0:P.value)?(0,e.jsxs)("div",{style:{position:"relative"},children:[g.formatMessage({id:"involve.extend.title.callback.url"}),(0,e.jsx)(ie.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:g.formatMessage({id:"involve.extend.title.documentation"})})]}):(0,e.jsxs)("div",{style:{position:"relative"},children:[g.formatMessage({id:"involve.extend.title.to.be.notified.group"}),(0,e.jsx)(ie.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:g.formatMessage({id:"involve.extend.title.documentation"})})]}),name:"url",rules:[{required:!0,message:f===((l=N[1])===null||l===void 0?void 0:l.value)?g.formatMessage({id:"involve.input.text.callback.url.tip"}):g.formatMessage({id:"involve.input.text.notified.group.tip"})}]})}})]})},ke=Ve,$e=function(j){var re=Y.Z.useForm(),R=x()(re,1),D=R[0],g=(0,o.useIntl)(),I=j.timingFormVisible,c=j.setTimingFormVisible,O=j.formRef,V=j.notificationInfo,oe=function(){var n=L()(u()().mark(function m(P){var l,f,i;return u()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:l=O.current.getFieldValue("actionList"),f=v()(v()({},V),P),i=l==null?void 0:l.map(function(p){return p.idx===V.idx?f:p}),O.current.setFieldValue("actionList",i),c(!1);case 5:case"end":return F.stop()}},m)}));return function(P){return n.apply(this,arguments)}}(),J=function(){D.resetFields()},A=function(){c(!1)};return(0,w.useEffect)(function(){I&&!(0,H.isEmpty)(V)?D.setFieldsValue(v()({},V)):I||J()},[I]),(0,e.jsxs)(K.Y,{title:g.formatMessage({id:"involve.extend.title.scheduled.notification"}),width:560,form:D,modalProps:{destroyOnClose:!0,onCancel:function(){return A()}},layout:"horizontal",open:I,onFinish:oe,children:[(0,e.jsx)(he.Z,{label:g.formatMessage({id:"involve.extend.title.subscription.type"}),name:"action",options:se,rules:[{required:!0}]}),(0,e.jsx)(ye.Z,{label:g.formatMessage({id:"involve.extend.title.group.chat.name"}),name:"name",rules:[{required:!0}]}),(0,e.jsx)(ye.Z,{label:(0,e.jsxs)("div",{style:{position:"relative"},children:[g.formatMessage({id:"involve.extend.title.to.be.notified.group"}),(0,e.jsx)(ie.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:g.formatMessage({id:"involve.extend.title.documentation"})})]}),name:"url",rules:[{required:!0}]}),(0,e.jsxs)(ve.Z,{children:[(0,e.jsx)(ce.Z,{span:10,children:(0,e.jsx)(he.Z,{label:g.formatMessage({id:"involve.extend.title.notification.time"}),name:"period",options:te,rules:[{required:!0}]})}),(0,e.jsx)(ce.Z,{span:14,children:(0,e.jsx)(he.Z,{label:"",name:"timeList",options:ne,rules:[{required:!0}],fieldProps:{mode:"tags"}})})]})]})},ze=$e,fe=t(91910),Be=t(29448),Ke=t(24969),We=t(97269),Me=t(5966),Ne=t(93410),be=t(50727),Pe=t(68872),je=t(86738),_e=t(85265),Ue=t(57381),Ge=t(86250),Ye=["idx"],He=["idx"],Je=["id"],Xe=function(j){var re=(0,o.useModel)("involve"),R=re.subConfigList,D=j.involveDrawerVisible,g=j.setInvolveDrawerVisible,I=j.involveDrawerInfo,c=j.tableActionRef,O=I.id,V=Pe.ZP.useMessage(),oe=x()(V,2),J=oe[0],A=oe[1],n=(0,o.useIntl)(),m=(0,w.useRef)(),P=(0,w.useRef)(),l=(0,w.useState)([]),f=x()(l,2),i=f[0],T=f[1],F=(0,w.useRef)(),p=(0,w.useRef)(),S=(0,w.useState)(!1),k=x()(S,2),$=k[0],ge=k[1],Ie=(0,w.useState)(!1),de=x()(Ie,2),ot=de[0],Te=de[1],at=(0,w.useState)(!1),Ee=x()(at,2),lt=Ee[0],Le=Ee[1],st=(0,w.useState)(!1),Se=x()(st,2),dt=Se[0],Ze=Se[1],Ce=(0,w.useRef)({}),ut=function(){var a;(a=m.current)===null||a===void 0||a.resetFields()},De=function(){g(!1)},ct=function(){Te(!0)},vt=function(a){var r=(0,H.cloneDeep)(a),s=r.ruleConfigList,d=r.actionList;if(Array.isArray(s)&&!(0,H.isEmpty)(s)){var M=s.map(function(C,E){var y=C.idx,pe=B()(C,Ye);return v()(v()({},pe),{},{id:E+1})});r.ruleConfigList=M}if(Array.isArray(d)&&!(0,H.isEmpty)(d)){var b=d.map(function(C){var E=C.idx,y=B()(C,He);return v()({},y)});r.actionList=b}return r},mt=function(a){var r=(0,H.cloneDeep)(a),s=r.ruleConfig,d=r.actionList,M=[];if(Array.isArray(s)&&!(0,H.isEmpty)(s)){var b=s.map(function(E){var y=E.id,pe=B()(E,Je);return M.push(y),v()(v()({},pe),{},{idx:y})});r.ruleConfigList=b}if(r.editableKeyList=M,Array.isArray(d)&&!(0,H.isEmpty)(d)){var C=d.map(function(E,y){return v()(v()({},E),{},{idx:y+1})});r.actionList=C}return r},ft=function(){var h=L()(u()().mark(function a(r){var s,d,M,b;return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return ge(!0),s=vt(r),O&&(s.id=O),ge(!1),E.next=6,(0,fe.saveSubscriptionConfig)(s);case 6:d=E.sent,d.code===200&&d.msg==="success"&&(O?J.success(n.formatMessage({id:"common.message.text.edit.success"})):J.success(n.formatMessage({id:"common.message.text.add.success"})),g(!1),c==null||(M=c.current)===null||M===void 0||(b=M.reloadAndRest)===null||b===void 0||b.call(M));case 8:case"end":return E.stop()}},a)}));return function(r){return h.apply(this,arguments)}}(),Ae=(0,o.useRequest)(function(h){return(0,fe.querySubscriptionDetailById)({id:h})},{manual:!0,formatResult:function(a){var r=a.content;return mt(r)||{}},onSuccess:function(a){var r,s=a.actionList,d=a.condition,M=a.name,b=a.ruleConfigList,C=a.editableKeyList;(r=m.current)===null||r===void 0||r.setFieldsValue({actionList:s,condition:d,name:M,ruleConfigList:b}),T(C)}}),xt=Ae.loading,gt=Ae.run;(0,w.useEffect)(function(){D&&O?gt(O):D||ut()},[D]);var pt=function(a){a.actionType==="timing"?(Ce.current=v()({},a),Le(!0)):a.actionType==="realtime"&&(Ce.current=v()({},a),Ze(!0))},ht=[{title:n.formatMessage({id:"involve.extend.title.serial.number"}),dataIndex:"id",editable:!1,width:100,align:"center",render:function(a,r,s){return s+1}},{title:n.formatMessage({id:"rule.module.text.variable.name"}),dataIndex:"key",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(a,r){var s=r.rowIndex,d=(R==null?void 0:R.map(function(M){return{label:M.keyName,value:M.key}}))||[];return{options:d,allowClear:!1,onSelect:function(){var b,C;(b=F.current)===null||b===void 0||(C=b.setRowData)===null||C===void 0||C.call(b,s,{operator:void 0,value:void 0})}}}},{title:n.formatMessage({id:"involve.extend.title.condition"}),dataIndex:"operator",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(a,r){var s,d,M=r.rowIndex,b=(s=F.current)===null||s===void 0||(d=s.getRowData)===null||d===void 0||(d=d.call(s,M))===null||d===void 0?void 0:d.key;if(!b)return[];var C=R==null?void 0:R.find(function(y){return y.key===b}),E=C==null?void 0:C.operatorList.map(function(y){return{label:y,value:y}});return{options:E||[]}}},{title:n.formatMessage({id:"rule.module.text.variable.value"}),dataIndex:"value",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(a,r){var s,d,M=r.rowIndex,b=(s=F.current)===null||s===void 0||(d=s.getRowData)===null||d===void 0||(d=d.call(s,M))===null||d===void 0?void 0:d.key;if(!b)return[];var C=R==null?void 0:R.find(function(y){return y.key===b}),E=C==null?void 0:C.value.map(function(y){return{label:y==null?void 0:y.valueName,value:y==null?void 0:y.value}});return{showSearch:!0,options:E||[]}}},{title:n.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),valueType:"option",width:140,render:function(){return[]}}],yt=[{title:n.formatMessage({id:"involve.extend.title.serial.number"}),dataIndex:"id",editable:!1,width:100,align:"center",render:function(a,r,s){return s+1}},{title:n.formatMessage({id:"involve.extend.title.action.title"}),dataIndex:"actionType",editable:!1,align:"center",valueType:"select",valueEnum:(0,Be.W_)(W)},{title:n.formatMessage({id:"involve.extend.title.action.content"}),dataIndex:"action",editable:!1,align:"center",render:function(a,r){return(0,e.jsx)(ie.ZP,{type:"link",size:"small",style:{fontSize:12},onClick:function(){return pt(r)},children:r!=null&&r.action?n.formatMessage({id:"involve.button.text.click.edit"}):n.formatMessage({id:"involve.button.text.click.setting"})})}},{title:n.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),valueType:"option",width:200,render:function(a,r){return[(0,e.jsx)(je.Z,{title:n.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){var d,M,b=m==null||(d=m.current)===null||d===void 0?void 0:d.getFieldValue("actionList"),C=b.filter(function(y){return y.idx!==r.idx}),E=C.map(function(y,pe){return v()(v()({},y),{},{idx:pe+1})});m==null||(M=m.current)===null||M===void 0||M.setFieldValue("actionList",E)},okText:n.formatMessage({id:"common.button.text.ok"}),cancelText:n.formatMessage({id:"common.button.text.cancel"}),children:(0,e.jsx)(ie.ZP,{type:"link",danger:!0,children:n.formatMessage({id:"common.button.text.delete"})},"delete")},"action")]}}];return(0,e.jsxs)(_e.Z,{title:O?n.formatMessage({id:"involve.extend.title.edit"}):n.formatMessage({id:"involve.extend.title.add"}),width:"64%",destroyOnClose:!0,open:D,onClose:De,children:[A,(0,e.jsx)(Ue.Z,{spinning:xt,children:(0,e.jsxs)(We.A,{onFinish:ft,formRef:m,layout:"horizontal",submitter:{submitButtonProps:{loading:$},render:function(a,r){return(0,e.jsxs)(Ge.Z,{justify:"end",gap:"small",children:[(0,e.jsx)(ie.ZP,{onClick:function(){return De()},children:n.formatMessage({id:"common.button.text.cancel"})}),r]})}},children:[(0,e.jsx)(Me.Z,{label:n.formatMessage({id:"involve.module.text.involve.title"}),name:"name",formItemProps:{rules:[{required:!0}]}}),(0,e.jsxs)(Ne.Z,{style:{marginBottom:20},bodyStyle:{backgroundColor:"rgb(245, 245, 245)",padding:"0 20px 16px 20px"},children:[(0,e.jsx)(be.Z,{rowKey:"idx",name:"ruleConfigList",actionRef:P,editableFormRef:F,headerTitle:(0,e.jsx)("div",{style:{fontSize:14},children:n.formatMessage({id:"involve.extend.title.conditional.config"})}),recordCreatorProps:{creatorButtonText:n.formatMessage({id:"involve.extend.title.addRowConfig"}),record:function(){return{idx:(Math.random()*1e6).toFixed(0)}}},onChange:function(){var a;return(a=m.current)===null||a===void 0?void 0:a.setFieldValue("condition",void 0)},columns:ht,editable:{type:"multiple",editableKeys:i,onChange:T,actionRender:function(a,r,s){return[s.delete]}}}),(0,e.jsx)(Fe.Z,{name:["ruleConfigList"],children:function(a){var r=a.ruleConfigList;return(0,e.jsx)(Me.Z,{label:n.formatMessage({id:"involve.extend.title.logical"}),name:"condition",fieldProps:{placeholder:n.formatMessage({id:"involve.extend.title.logical.example"}),style:{maxWidth:"64%"}},rules:[{required:(r==null?void 0:r.length)>1}]})}}),(0,e.jsxs)(ie.ZP,{type:"primary",onClick:function(){return ct()},style:{fontSize:13,padding:"4px 10px",gap:2},children:[(0,e.jsx)(Ke.Z,{}),n.formatMessage({id:"involve.extend.title.addAction"})]}),(0,e.jsx)(be.Z,{rowKey:"idx",name:"actionList",editableFormRef:p,headerTitle:(0,e.jsx)("div",{style:{fontSize:14},children:n.formatMessage({id:"involve.extend.title.action.config"})}),columns:yt,recordCreatorProps:!1})]})]})}),(0,e.jsx)(Oe,{noticeFormVisible:ot,setNoticeFormVisible:Te,formRef:m}),(0,e.jsx)(ze,{notificationInfo:Ce.current,timingFormVisible:lt,setTimingFormVisible:Le,formRef:m}),(0,e.jsx)(ke,{notificationInfo:Ce.current,realtimeFormVisible:dt,setRealtimeFormVisible:Ze,formRef:m})]})},Qe=Xe,qe=t(39380),et=t(90498),tt=t(72269),Re=t(96074),nt=function(){var j=Pe.ZP.useMessage(),re=x()(j,2),R=re[0],D=re[1],g=(0,w.useRef)(),I=(0,w.useRef)({}),c=(0,o.useIntl)(),O=(0,w.useState)(!1),V=x()(O,2),oe=V[0],J=V[1],A=function(){var l=L()(u()().mark(function f(i){var T,F,p,S;return u()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return T={id:i==null?void 0:i.id,status:(i==null?void 0:i.status)==="valid"?"invalid":"valid"},$.next=3,(0,fe.queryChangeStatus)(T);case 3:F=$.sent,F.msg==="success"&&(R.success(c.formatMessage({id:"common.message.text.edit.success"})),(p=g.current)===null||p===void 0||(S=p.reloadAndRest)===null||S===void 0||S.call(p));case 5:case"end":return $.stop()}},f)}));return function(i){return l.apply(this,arguments)}}(),n=function(f){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"create";i==="edit"?(I.current=v()({},f),J(!0)):(I.current={},J(!0))},m=function(){var l=L()(u()().mark(function f(i){var T,F,p,S;return u()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return T=R.loading(c.formatMessage({id:"common.message.text.delete.loading"})),$.next=3,(0,fe.deleteInvolve)({id:i});case 3:F=$.sent,T(),(F.code===200||F.msg==="success")&&(R.success(c.formatMessage({id:"common.message.text.delete.success"})),(p=g.current)===null||p===void 0||(S=p.reloadAndRest)===null||S===void 0||S.call(p));case 6:case"end":return $.stop()}},f)}));return function(i){return l.apply(this,arguments)}}(),P=[{title:c.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(f,i){return(0,e.jsxs)("div",{children:[(0,e.jsx)("section",{style:{color:"#999"},children:(i==null?void 0:i.gmtCreate)||"-"}),(0,e.jsx)("section",{style:{color:"#999"},children:(i==null?void 0:i.gmtModified)||"-"})]})}},{title:c.formatMessage({id:"involve.module.text.involve.id"}),dataIndex:"id",valueType:"text",align:"center",width:120},{title:c.formatMessage({id:"involve.module.text.involve.title"}),dataIndex:"name",valueType:"text",align:"center",width:240},{title:c.formatMessage({id:"involve.module.text.involve.type"}),dataIndex:"actionType",valueType:"text",align:"center",width:320,hideInSearch:!0,render:function(f,i){return(0,e.jsx)(le.Z,{placement:"top",text:i.actionType,maxWidth:320})}},{title:c.formatMessage({id:"rule.input.text.rule.group.creator"}),dataIndex:"username",valueType:"text",align:"center"},{title:c.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:240,fixed:"right",render:function(f,i){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(tt.Z,{checkedChildren:c.formatMessage({id:"common.button.text.enable"}),unCheckedChildren:c.formatMessage({id:"common.button.text.disable"}),checked:(i==null?void 0:i.status)==="valid",onClick:function(){return A(i)}}),(0,e.jsx)(Re.Z,{type:"vertical"}),(0,e.jsx)(ie.ZP,{size:"small",onClick:function(){return n(i,"edit")},type:"link",children:c.formatMessage({id:"common.button.text.edit"})}),(0,e.jsx)(Re.Z,{type:"vertical"}),(0,e.jsx)(je.Z,{title:c.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){return m(i.id)},okText:c.formatMessage({id:"common.button.text.ok"}),cancelText:c.formatMessage({id:"common.button.text.cancel"}),children:(0,e.jsx)(ie.ZP,{type:"link",danger:!0,size:"small",children:c.formatMessage({id:"common.button.text.delete"})})})]})}}];return(0,e.jsxs)(qe._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[D,(0,e.jsx)(et.Z,{headerTitle:(0,e.jsx)("div",{className:X.Z.customTitle,children:c.formatMessage({id:"involve.module.text.involve.inquiry"})}),scroll:{x:"max-content"},actionRef:g,rowKey:"id",search:!1,request:function(){var l=L()(u()().mark(function f(i){var T,F,p,S,k,$,ge;return u()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return T=i.pageSize,F=i.current,p={page:F,size:T},de.next=4,(0,fe.querySubscriptionList)(p);case 4:return S=de.sent,k=S.content,$=S.code,ge=S.msg,de.abrupt("return",{data:(k==null?void 0:k.data)||[],total:(k==null?void 0:k.total)||0,success:$===200&&ge==="success"||!1});case 9:case"end":return de.stop()}},f)}));return function(f){return l.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(ie.ZP,{type:"primary",onClick:function(){return n({})},children:c.formatMessage({id:"involve.extend.text.add"})},"create")]},columns:P,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1}}),(0,e.jsx)(Qe,{tableActionRef:g,involveDrawerVisible:oe,setInvolveDrawerVisible:J,involveDrawerInfo:I.current})]})},it=function(){return(0,e.jsx)(G.Z,{accessKey:"isPlatformAdmin",children:(0,e.jsx)(nt,{})})},rt=it},53846:function(me,_){_.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
